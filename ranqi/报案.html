<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>报案</title>
    <link rel="stylesheet" href="./form/css/page.css">
</head>

<body>

    <div class="main" id="view-main" style="width:1052px;margin:0 auto;">
        <form id="page" action="" onsubmit="return submitPage()">

            <div class="form-area area-demos">
                <div class="form-area-head">
                    <span class="area-title">保单信息</span>
                    <div class="area-title-icon icon-open" onclick="openClose(event)"></div>

                </div>
                <div class="form-area-main" ondragover="dragOver(event)" ondrop="drop(event,this,'move','area-main')">

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">保单号</span>
                        </div>
                        <input type="text" name="" id="" disabled value="6172120180600000035">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">产品</span>
                        </div>
                        <input type="text" name="" id="" disabled value="民用燃气用户综合保险">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">产品类型</span>
                        </div>
                        <input type="text" name="" id="" disabled value="非水险">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">保额</span>
                        </div>
                        <input type="text" name="" id="" disabled value="3198">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">被保险人</span>
                        </div>
                        <input type="text" name="" id="" disabled value="王紫荆">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">投保人</span>
                        </div>
                        <input type="text" name="" id="" disabled value="劲螭消费金融有限公司">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">承保机构</span>
                        </div>
                        <input type="text" name="" id="" disabled value="渤海财产保险股份有限公司天津分公司">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">保险期限</span>
                        </div>
                        <input type="text" name="" id="" disabled value="2018-06-25 00:00:00 至 2019-06-25 00:00:00">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">出险次数</span>
                        </div>
                        <input type="text" name="" id="" disabled value="1">
                    </div>
                </div>
            </div>

            <div class="form-area area-demos">
                <div class="form-area-head">
                    <span class="area-title">报案信息</span>
                    <div class="area-title-icon icon-open" onclick="openClose(event)"></div>

                </div>
                <div class="form-area-main" ondragover="dragOver(event)" ondrop="drop(event,this,'move','area-main')">

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required"></span>
                            <span class="span-text">赔案号</span>
                        </div>
                        <input type="text" name="" id="" disabled value="4123517212018000042">
                    </div>

                    <div class="form-component component-select">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">报案方式</span>
                        </div>
                        <select name="baoanType" id="" required>
                            <option value="" selected> - 请选择 - </option>
                            <option value="1">劲螭报案</option>
                            <option value="2">400报案</option>
                            <option value="3">捷信报案</option>
                            <option value="4">微信报案</option>
                        </select>
                    </div>

                    <div class="form-component component-double-select">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">出险原因</span>
                        </div>
                        <select name="" id="" required>
                            <!-- <option value="" selected>-- 请选择 --</option> -->
                            <option value="" selected></option>
                            <option value="1">意外事故</option>
                        </select>
                        <select class="second-select risk-process" name="riskCause" id="" required>
                            <option value="" selected></option>
                            <option value="1">燃气泄漏</option>
                        </select>
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">客户姓名</span>
                        </div>
                        <input class="risk-process" type="text" name="customerName" id="" required value="">
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">联系电话</span>
                        </div>
                        <input class="risk-process" type="text" name="customerPhoneNum" id="" required value="">
                    </div>

                    <div class="form-component component-date">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">出险时间</span>
                        </div>
                        <input class="Wdate risk-process" type="text" id="" name="riskTime" onclick="WdatePicker({'readOnly':true})"
                            required>
                    </div>

                    <div class="form-component component-date">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">上门时间</span>
                        </div>
                        <input class="Wdate" type="text" id="" name="doorTime" onclick="WdatePicker({'readOnly':true})"
                            required>
                    </div>

                    <div class="form-component component-input">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">客户地址</span>
                        </div>
                        <input class="risk-process" type="text" name="customerAdress" id="" required value="">
                    </div>

                    <div class="form-component component-table">
                        <table width="1014px" border="0" cellpadding="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <th>报损险别</th>
                                    <th>投保序号</th>
                                    <th>投保份数</th>
                                    <th>保险金额</th>
                                    <th>报损金额</th>
                                    <th>备注</th>
                                    <th>操作</th>
                                </tr>
                                <tr>
                                    <td>
                                        <select class="risk-type" name="risk-type" id="" required onchange="changeRiskType(event)">
                                            <option value="" selected> - 请选择 - </option>
                                        </select>
                                    </td>

                                    <td>
                                        <select class="risk-num" name="risk-num" id="" required onchange="changeRiskNum(event)">
                                            <option value="" selected> - 请选择 - </option>
                                        </select>
                                    </td>

                                    <td>
                                        <input type="text" name="num" id="" required disabled value="">
                                    </td>

                                    <td>
                                        <input type="text" name="money" id="" required disabled value="">
                                    </td>

                                    <td>
                                        <input class="money" type="text" name="" id="" required value="" onkeyup="getCount(event)">
                                    </td>

                                    <td>
                                        <input type="text" name="" id="" value="">
                                    </td>

                                    <td>
                                        <button type="button" class="delete-row" onclick="deleteRow(event)">删除</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button type="button" class="add-row">新增</button>
                                    </td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>合计
                                        <input class="count risk-process" type="text" name="baosuoCount" id="" value="">
                                    </td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="form-component component-textarea">
                        <div class="input-title">
                            <span class="span-required">*</span>
                            <span class="span-text">出险经过</span>
                        </div>
                        <textarea class="risk-process-all" placeholder="出险经过" name="" id="" rows="4" maxlength="1000"
                            required=""></textarea>
                    </div>
                </div>
            </div>



            <div class="form-area footer-button">
                <div class="form-component button-submit">
                    <button class="submit" data-pageSubmitUrl="url">提交</button>
                </div>
                <!-- <div class="form-component button-submit">
                <button class="submit">提交</button>
            </div> -->
            </div>

        </form>
    </div>





    <script src="./form/lib/js/jquery-1.8.0.min.js"></script>
    <script src="./form/lib/js/form.js"></script>
    <script src="./form/lib/My97DatePicker/WdatePicker.js"></script>
    <script src="./form/js/common.js"></script>
    <script src="./form/js/page.js"></script>

    <!-- 二级联动 -->
    <script>
        var policyRiskList = [{
            risk_name: "财务意外险",
            risk_code: "000001"
        }, {
            risk_name: "人身意外险",
            risk_code: "000002",
        }];

        var riskList = [{
                risk_name: "财务意外险",
                risk_code: "000001",
                insurance_name: "1",
                insurance_no: "1",
                insurance_num: "1",
                amount: "6000",
            },
            {
                risk_name: "财务意外险",
                risk_code: "000001",
                insurance_name: "2",
                insurance_no: "2",
                insurance_num: "1",
                amount: "3000",
            },
            {
                risk_name: "人身意外险",
                risk_code: "000002",
                insurance_name: "1",
                insurance_no: "1",
                insurance_num: "1",
                amount: "5000",
            },
            {
                risk_name: "人身意外险",
                risk_code: "000002",
                insurance_name: "2",
                insurance_no: "2",
                insurance_num: "1",
                amount: "4000",
            },
        ]

        var nextList = [];

        function changeRiskType(e) {
            var currentValue = $(e.currentTarget).val();
            var nextSelect = $(e.currentTarget).parent().next().children("select.risk-num");
            nextList = [];
            nextSelect.empty().append("<option value='' selected> - 请选择 - </option>");
            $(e.currentTarget).parent().next().next().children("input").val("");
            $(e.currentTarget).parent().next().next().next().children("input").val("");
            if (currentValue == "") {
                return;
            }
            for (var i = 0 ; i < riskList.length ; i ++) {
                if (currentValue == riskList[i].risk_code) {
                    nextList.push(riskList[i]);
                }
            }
            for (var i = 0 ; i < nextList.length ; i ++) {
                nextSelect.append("<option value='" + nextList[i].insurance_no + "' >" +
                    nextList[i].insurance_name + "</option>");
            }
        }

        function changeRiskNum (e) {
            var riskNum = $(e.currentTarget).val();
            var insuranceNo = $(e.currentTarget).parent().next().children("input");
            var amount = insuranceNo.parent().next().children("input");
            if (riskNum == "") {
                insuranceNo.val("");
                amount.val("");
                return;
            }
            for (var i = 0 ; i < nextList.length ; i ++) {
                if (riskNum == nextList[i].insurance_no) {
                    insuranceNo.val(nextList[i].insurance_num);
                    amount.val(nextList[i].amount);
                    return;
                }
            }
        }
        
        $(function () {
            for (var i = 0; i < policyRiskList.length; i++) {
                $("select.risk-type").append("<option value='" + policyRiskList[i].risk_code + "' >" +
                    policyRiskList[i].risk_name + "</option>");
            }
        })
    </script>

    <script>
        // var riskList = [
        //     {
        //         risk_name: "财务意外险",
        //         risk_code: "000001",
        //         children: [{
        //             insurance_name: "1",
        //             insurance_no: "1",
        //             insurance_num: "1",
        //             amount: "6000",
        //         },{
        //             insurance_name: "2",
        //             insurance_no: "2",
        //             insurance_num: "1",
        //             amount: "3000",
        //         }]
        //     },
        //     {
        //         risk_name: "人身意外险",
        //         risk_code: "000002",
        //         children: [{
        //             insurance_name: "1",
        //             insurance_no: "1",
        //             insurance_num: "1",
        //             amount: "5000",
        //         },{
        //             insurance_name: "2",
        //             insurance_no: "2",
        //             insurance_num: "1",
        //             amount: "4000",
        //         }]
        //     },
        // ]
    </script>

</body>

</html>